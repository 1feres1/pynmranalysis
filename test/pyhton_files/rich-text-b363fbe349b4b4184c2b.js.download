(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{955:function(e,n,t){"use strict";t.r(n),t.d(n,"Editor",(function(){return Be}));var r=t(948),i=t.n(r),a=(t(951),t(952),t(949),t(950),t(953),t(18),t(35),t(113),t(93),t(50),t(82),t(31),t(7),t(5),t(8),t(3)),o=t.n(a);t(77),t(29);function c(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(n,t,r,i,a,o){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.kind=n,this.from=t,this.to=a,this.contentFrom=r,this.contentTo=i,this.openParent=o,this.checkedProperties={}}var n,t,r;return n=e,(t=[{key:"copy",value:function(){return new e(this.kind,this.from,this.to,this.contentFrom,this.contentTo,this.openParent)}},{key:"getOuter",value:function(e){return e.getRange(this.from,this.to)}},{key:"getContent",value:function(e){return e.getRange(this.contentFrom,this.contentTo)}},{key:"hasContent",value:function(e){return this.getContent(e).trim().length}},{key:"containsCursor",value:function(e,n){var t=e.getCursor("head");if("inner"===n)return u(e,t,this.contentFrom,this.contentTo);if("outer"===n)return u(e,t,this.from,this.to);throw new Error("bad region ".concat(n))}},{key:"rangeForRegion",value:function(e){if("pre"===e)return{from:this.from,to:this.contentFrom};if("inner"===e)return{from:this.contentFrom,to:this.contentTo};if("post"===e)return{from:this.contentTo,to:this.to};if("outer"===e)return this;throw new Error("bad region "+e)}}])&&c(n.prototype,t),r&&c(n,r),e}();function u(e,n,t,r){var i=e.indexFromPos(n),a=e.indexFromPos(t),o=e.indexFromPos(r);return a<=i&&i<=o}function s(e,n){e.operation((function(){e.replaceRange("",n.contentTo,n.to),e.replaceRange("",n.from,n.contentFrom)}))}function f(){function e(e,n){e.stack.push(n)}function n(e){e.stack.pop()}function t(e,t){return n(t),t.stack[t.stack.length-1](e,t)}function r(t,r){e(t,(function(e,t){return n(t),r(e,t)}))}function a(e,n,t,i,a){var o=0;return function e(n,c){if(n.match(t[o])){var l=i[o];return++o<t.length?r(c,e):a(n,c),l}}(e,n)}function c(e,n,t){return a(e,n,[/^\\begin\s*/,"{",/[^{}]+/,"}"],["tag","bracket","keyword","bracket"],t)}function u(e,n,t){return a(e,n,[/^\\end\s*/,"{",/[^{}]+/,"}"],["tag","bracket","keyword","bracket"],t)}function s(e,n){return i.a.Pos(n.line,e.start)}function f(e,n){return i.a.Pos(n.line,e.start+e.current().length)}function h(e,n,t,r){var i=new l(t,r,f(e,n));return n.openMarks.push(i),i}function d(e,n){n.openMarks.pop()}function m(e,n,t){var r=n.openMarks.pop(),i=r.openParent||n.openMarks[n.openMarks.length-1],a=new l(r.kind,r.from,r.contentFrom,t,f(e,n),i);return n.marks.push(a),a}function g(r,i,a,o,c,l,u,f,g,p){if(r.match(c))return h(r,i,a,o),e(i,(function(e,r){if(k(e))return d(0,r),t(e,r);for(var i=0;i<g.length;++i)if(e.match(g[i],!1))return d(0,r),t(e,r);return e.match(u)?(m(e,r,s(e,r)),n(r),f):p(e,r)})),l}function p(e,n,t,r,i){return g(e,n,t,r,"{","bracket","}","bracket",[],i)}function k(e){return e.sol()&&(e.eol()||e.match(/^[\s\u00a0]+$/))}function v(t,r,i){return function(t,r,i,a,o,c,l){if(t.match(i))return e(r,(function(e,t){if(!k(e))return e.match(o)?(n(t),c):l(e,t);n(t)})),a}(t,r,"[","bracket","]","bracket",i)}function b(e,n){return R(e,n)||F(e,n)||$(e,n)||function(e,n){return e.match(/^\\(?:[a-zA-Z]+|.|\n)/)||e.match(/^[\^_&~]/)?"tag":e.match(/^(?:\d+\.\d*|\d*\.\d+|\d+)/)?"number":void e.next()}(e)}var w=["cite","citep","citet","footcite","nocite","autocite","autocites","citeauthor","citeyear","parencite","citealt","textcite","cref","Cref"].reduce((function(e,n){return e[n]={lookaheadPattern:new RegExp("^\\\\"+n+"\\s*[\\[{]"),matchPattern:new RegExp("^\\\\"+n+"\\s*")},e}),{}),y=["author","chapter\\*","chapter","section","section\\*","subsection","subsection\\*","subsubsection","subsubsection\\*","textbf","textit","caption","label","includegraphics","ref","input","include"].reduce((function(e,n){return e[n]={lookaheadPattern:new RegExp("^\\\\"+n+"\\s*[\\[{]"),matchPattern:new RegExp("^\\\\"+n+"\\s*")},e}),{}),C=Object.assign({},y,w);function x(e,n,t){var i=C[t];if(e.match(i.lookaheadPattern,!1)){e.match(i.matchPattern);var a=s(e,n);return r(n,(function(e,n){return p(e,n,t,a,W)})),"tag"}}function R(t,r){var i=t.match(/^\\verb\*?([^a-zA-Z])/);if(i){var a=i[1];return e(r,(function(e,t){return e.match(a)?(n(t),"tag"):(e.skipTo(a)||e.skipToEnd(),"string")})),"tag"}}function L(e,n){return e.match(/^[^\\]+/)||e.next(),"string"}function M(e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var t=e[n].matchOnSingleLine?"$":"";e[n].beginPattern=new RegExp("^\\\\begin\\s*{"+n+"}"+t),e[n].endPattern=new RegExp("^\\\\end\\s*{"+n+"}")}return e}var P=M({verbatim:{tokenizer:L,allowBlankLines:!0},Verbatim:{tokenizer:L,allowBlankLines:!0},lstlisting:{tokenizer:L,allowBlankLines:!0},minted:{tokenizer:L,allowBlankLines:!0},comment:{tokenizer:function(e,n){return e.match(/^[^\\]+/)||e.next(),"comment"},allowBlankLines:!0}}),T=M({math:{tokenizer:b,kind:"inline-math",allowBlankLines:!1},displaymath:{tokenizer:b,kind:"display-math",allowBlankLines:!1},equation:{tokenizer:b,kind:"outer-display-math",allowBlankLines:!1},"equation\\*":{tokenizer:b,kind:"outer-display-math",allowBlankLines:!1},eqnarray:{tokenizer:b,kind:"outer-display-math",allowBlankLines:!1},"eqnarray\\*":{tokenizer:b,kind:"outer-display-math",allowBlankLines:!1},align:{tokenizer:b,kind:"outer-display-math",allowBlankLines:!1},"align\\*":{tokenizer:b,kind:"outer-display-math",allowBlankLines:!1},gather:{tokenizer:b,kind:"outer-display-math",allowBlankLines:!1},"gather\\*":{tokenizer:b,kind:"outer-display-math",allowBlankLines:!1},multline:{tokenizer:b,kind:"outer-display-math",allowBlankLines:!1},"multline\\*":{tokenizer:b,kind:"outer-display-math",allowBlankLines:!1},alignat:{tokenizer:b,kind:"outer-display-math",allowBlankLines:!1},"alignat\\*":{tokenizer:b,kind:"outer-display-math",allowBlankLines:!1},xalignat:{tokenizer:b,kind:"outer-display-math",allowBlankLines:!1},"xalignat\\*":{tokenizer:b,kind:"outer-display-math",allowBlankLines:!1}}),A=M({abstract:{tokenizer:W,kind:"abstract",allowBlankLines:!0}}),E=M({itemize:{tokenizer:B,kind:"itemize",allowBlankLines:!0,matchOnSingleLine:!0},enumerate:{tokenizer:B,kind:"enumerate",allowBlankLines:!0,matchOnSingleLine:!0}}),O=M({figure:{tokenizer:function(e,n){return x(e,n,"caption")||function(e,n){var t=C.includegraphics;if(e.match(t.lookaheadPattern,!1)){e.match(t.matchPattern);var i=s(e,n);return r(n,(function(e,n){return p(e,n,"includegraphics",i,W)})),r(n,(function(e,n){return function(e,n,t,r,i){return g(e,n,t,r,"[","bracket","]","bracket",[],i)}(e,n,"includegraphics-optional",i,W)})),"tag"}}(e,n)||W(e,n)},kind:"figure",allowBlankLines:!0}}),S=M({tikzpicture:{tokenizer:function(e,n){return z(e,n,S)||$(e,n)||j(e)},allowBlankLines:!0}});function z(r,i,a){return function(e,n,t,r){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i];if(e.match(a.beginPattern,!1))return r(e,n,a)}}(r,i,a,(function(r,i,a){var o,l,f;return(o=Object.prototype.hasOwnProperty.call(a,"kind"))&&(l=s(r,i)),c(r,i,(function(n,t){o&&(h(n,t,a.kind,l).checkedProperties.openMarksCount=t.openMarks.length-1);e(t,g)}));function g(e,r){return!a.allowBlankLines&&k(e)?(o&&d(0,r),t(e,r)):e.match(a.endPattern,!1)?(o&&(f=s(e,r)),n(r),u(e,r,(function(e,n){o&&(m(e,n,f).checkedProperties.openMarksCount=n.openMarks.length)}))):a.tokenizer(e,r)}}))}function F(e,n){return e.match(/^\\begin\s*{[^}]+}/,!1)?c(e,n,(function(){})):e.match(/^\\end\s*{[^}]+}/,!1)?u(e,n,(function(){})):void 0}function $(e,n){if(e.match(/^\\(?:[a-zA-Z]+|.|\n)/))return"tag"}function B(e,n){return function(e,n){var t="item";if(e.sol()&&e.match(/^\\item(?: |$)/)){var r=n.openMarks[n.openMarks.length-1];n.openMarks.length>0&&"enumerate"===r.kind&&(t="enumerate-item"),h(e,n,t,s(e,n));var i=m(e,n,f(e,n));if(i.checkedProperties.kind=t,"enumerate-item"===t||"item"===t){i.checkedProperties.number=1,i.checkedProperties.openMarksCount=n.openMarks.length-1;for(var a=n.marks.length-2;a>=0;a--){var o=n.marks[a];if(o.from.line<r.from.line)break;if(o.kind===t){if(o.openParent!==r)continue;i.checkedProperties.number=o.checkedProperties.number+1;break}}}return"tag"}}(e,n)||W(e,n)}function j(e){return e.match(/^[{}[\]]/)?"bracket":e.match(/^[&~]+/)?"tag":void(e.match(/^[^{}[\]\\$&%~]+/)||e.next())}function W(t,r){return x(t,r,"textbf")||x(t,r,"textit")||function(e,n){return g(e,n,"display-math",s(e,n),"\\[","keyword","\\]","keyword",[],b)}(t,r)||function(e,n){return g(e,n,"inline-math",s(e,n),"\\(","keyword","\\)","keyword",[],b)}(t,r)||x(t,r,"ref")||function(e,n){var t,r=null;return o.a.keys(w).forEach((function(i){if(t=x(e,n,i))return r=t,!1})),r}(t,r)||x(t,r,"label")||x(t,r,"input")||x(t,r,"include")||z(t,r,O)||z(t,r,E)||z(t,r,T)||R(t,r)||z(t,r,P)||z(t,r,S)||F(t,r)||$(t)||function(t,r,i){if(t.eat("{"))return e(r,(function(e,t){return e.eat("}")?(n(t),"bracket"):i(e,t)})),"bracket"}(t,r,W)||function(e,n){return g(e,n,"display-math",s(e,n),"$$","keyword","$$","keyword",[],b)}(t,r)||function(e,n){return g(e,n,"inline-math",s(e,n),"$","keyword","$","keyword",["$$"],b)}(t,r)||j(t)}function I(n,t){return function(e,n){if(e.match(/^\\title[[{]/,!1)){e.match(/^\\title/);var t=s(e,n);return r(n,(function(e,n){return p(e,n,"title",t,W)})),r(n,(function(e,n){return v(e,n,W)})),"tag"}}(n,t)||x(n,t,"author")||function(e,n,t,r){if(e.match(t)){var i=s(e,n);return h(e,n,r,i),m(e,n,i),"tag"}}(n,t,/^\\maketitle$/,"maketitle")||function(e,n){return x(e,n,"chapter")||x(e,n,"chapter\\*")||x(e,n,"section")||x(e,n,"section\\*")||x(e,n,"subsection")||x(e,n,"subsection\\*")||x(e,n,"subsubsection")||x(e,n,"subsubsection\\*")}(n,t)||z(n,t,A)||function(n,t){if(n.match(/^\\end\s*{document}/,!1))return u(n,t,(function(n,t){e(t,(function(e,n){return e.skipToEnd(),"comment"}))}))}(n,t)||W(n,t)}function H(e,n){e.sol()&&function(e){e.line+=1}(n);var t=function(e,n){if(e.match(/^\s*%/))return e.skipToEnd(),"comment"}(e);if(!t){var r=n.stack[n.stack.length-1];if(!r)throw new Error("empty stack");t=r(e,n)}return e.sol()&&!e.eol()&&(n.line-=1),t}this.startState=function(){return{stack:[I],line:-1,openMarks:[],marks:[]}},this.blankLine=function(e){H(new i.a.StringStream(""),e)},this.token=H,this.lineComment="%"}t(26),t(20),t(15),t(6),t(12),t(4),t(11),t(13),t(14),t(38),t(30);function h(e){var n=e.getViewport().to+100;return n<350?350:n}function d(e,n){return e.line===n.line&&e.ch===n.ch}function m(e,n){var t=n.from,r=n.to;return 0===t.ch&&r.ch===e.getLine(r.line).length}function g(e){try{return e()}catch(e){}}function p(e){return(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\\LaTeX/g,"LaTeX")).replace(/\\TeX/g,"TeX")).replace(/\\TikZ/g,"TikZ")).replace(/\\BibTeX/g,"BibTeX")).replace(/\\\[[A-Za-z0-9. ]*\]/g," ")).replace(/\\(?:[a-zA-Z]+|.|)/g,"")).replace(/{}|~/g," ")).replace(/[${}]/g,"")).replace(/ +/g," ")).trim()}function k(e,n,t){$(n).on("mousedown",(function(){var n=t.find();n&&e.setCursor(n.from),t.clear(),e.refresh(),setTimeout((function(){e.focus()}),0)}))}function v(e){var n=function(){return e.forEach((function(e){return e.clear()}))};return e.forEach((function(t,r){t.on("clear",n),t.on("hide",n),t.wlNextMark=e[r+1],t.wlChild=r>0})),e}t(39);var b=["itemize","enumerate"];function w(){this.wlMatched=!1}function y(){return this.wlMatched}function C(e,n){if(!this.wlChild)for(var t=0;t<n.length;++t){var r=n[t];if(r&&i(r,this))return a(this),void delete n[t]}function i(n,t){var r,a,o=n.rangeForRegion(t.wlRegion),c=t.find();return!!(c&&(r=o,a=c,d(r.from,a.from)&&d(r.to,a.to))&&function(e,n,t){return void 0===n.wlValue||e.getRange(t.from,t.to)===n.wlValue}(e,t,c)&&function(e,n){for(var t in n.wlProperties)if(Object.prototype.hasOwnProperty.call(n.wlProperties,t)&&e.checkedProperties[t]!==n.wlProperties[t])return!1;return!0}(n,t))&&(!t.wlNextMark||i(n,t.wlNextMark))}function a(e){e.wlMatched=!0,e.wlNextMark&&a(e.wlNextMark)}}function x(e,n,t,r,i){var a=n.rangeForRegion(t),c=a.from,l=a.to,u=e.markText(c,l,i);return b.includes(n.kind)?o.a.range(c.line,l.line+1).forEach((function(t){var r=n.checkedProperties.openMarksCount>4?4:n.checkedProperties.openMarksCount;t===c.line||t===l.line?(e.doc.removeLineClass(t,"text"),e.doc.addLineClass(t,"text","wl-indent-env-".concat(r))):e.doc.addLineClass(t,"text","wl-indent-".concat(r))})):n.openParent&&b.includes(n.openParent.kind)&&(e.doc.removeLineClass(c.line,"text"),e.doc.addLineClass(c.line,"text","wl-indent-".concat(n.openParent.checkedProperties.openMarksCount))),u.wlClearMatch=w,u.wlMatch=C,u.wlIsMatched=y,u.wlProperties=n.checkedProperties,u.wlRegion=t,r&&(u.wlValue=e.getRange(c,l)),u}function R(e){var n=$('<script type="math/tex; mode=display">').text(e);return $("<div>").append(n).css({"text-align":"center","font-family":"Times","padding-bottom":"10pt","padding-top":"10pt"})[0]}var L={matcher:function(e,n){return["inline-math","display-math","outer-display-math"].includes(n.kind)&&n.hasContent(e)&&!n.containsCursor(e,"outer")},marker:function(e,n){var t,r,i;if("inline-math"===n.kind)r=n.getContent(e),i=$('<script type="math/tex">').text(r),t=$("<span>").append(i).css({"font-family":"Times"})[0];else if("display-math"===n.kind)t=R(n.getContent(e));else{if("outer-display-math"!==n.kind)throw new Error("bad math mark ".concat(n.kind));t=R(n.getOuter(e))}var a=x(e,n,"outer",!0,{clearOnEnter:!0,replacedWith:t});return k(e,t,a),a}};function M(e,n){return $("<span>").text(e).addClass("wl-"+n+"-open")[0]}var P={matcher:function(e,n){return["chapter","chapter\\*","section","section\\*","subsection","subsection\\*","subsubsection","subsubsection\\*"].includes(n.kind)&&n.hasContent(e)},marker:function(e,n){var t;t=/^chapter/.test(n.kind)?"chapter":/^subsub/.test(n.kind)?"subsubsection":/^sub/.test(n.kind)?"subsection":"section";var r=function(e,n){var t=n.from,r=n.to,i=e.getLine(t.line);if(t.line===r.line&&r.ch!==i.length||t.line!==r.line)return!0;return!1}(e,n);v([x(e,n,"pre",!0,{inclusiveLeft:!r,inclusiveRight:!1,replacedWith:M(r?"{":"",t)}),x(e,n,"inner",!1,{inclusiveLeft:!0,inclusiveRight:!0,className:"wl-"+t}),x(e,n,"post",!0,{inclusiveLeft:!1,inclusiveRight:!r,replacedWith:M(r?"}":"",t)})])}};function T(e,n){return $("<span>").text(e).addClass("wl-".concat(n,"-open"))[0]}var A={matcher:function(e,n){return"textbf"===n.kind||"textit"===n.kind},marker:function(e,n){v([x(e,n,"pre",!0,{replacedWith:T("{",n.kind)}),x(e,n,"inner",!1,{inclusiveLeft:!0,inclusiveRight:!0,clearWhenEmpty:!1,className:"wl-".concat(n.kind)}),x(e,n,"post",!0,{replacedWith:T("}",n.kind)})])}};function E(e,n){return $("<div>").text(e).addClass(n)[0]}var O={matcher:function(e,n){return"abstract"===n.kind},marker:function(e,n){(function(e){return function(e){var n=e.contentTo,t=e.contentFrom;return n.line-t.line<2}(e)||function(e){return 16!==e.contentFrom.ch}(e)||function(e){return 0!==e.contentTo.ch}(e)})(n)||v([x(e,n,"pre",!0,{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:E("Abstract","wl-abstract-open")}),x(e,n,"inner",!0,{inclusiveLeft:!0,inclusiveRight:!0,className:"wl-abstract"}),x(e,n,"post",!0,{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:E(" ","wl-abstract-close")})])}};t(19);var S={matcher:function(e,n){return"itemize"===n.kind||"enumerate"===n.kind},marker:function(e,n){m(e,n)&&v([x(e,n,"inner",!1,{inclusiveLeft:!0,inclusiveRight:!0,clearWhenEmpty:!1,className:"wl-".concat(n.kind)})].concat(function(e,n){var t=x(e,n,"pre",!0,{inclusiveLeft:!0,inclusiveRight:!0,collapsed:!0}),r=x(e,n,"post",!0,{inclusiveLeft:!0,inclusiveRight:!0,collapsed:!0});return[t,r]}(e,n)))}};function z(e){var n="enumerate-item"===e.kind?"".concat(e.checkedProperties.number,"."):"â—";return $("<div>").text(n).addClass("wl-".concat(e.kind,"-open")).css("margin-left","-1.5em")[0]}var F={matcher:function(e,n){return"item"===n.kind||"enumerate-item"===n.kind},marker:function(e,n){x(e,n,"outer",!0,{inclusiveLeft:!0,inclusiveRight:!1,replacedWith:z(n)})}};function B(e){return $("<span>").text("[".concat(e,"]")).css("font-size","small").addClass("wl-figure-name")}var j={matcher:function(e,n){return"figure"===n.kind&&n.hasContent(e)&&!n.containsCursor(e,"outer")},marker:function(e,n,t){if(m(e,n)){var r=$("<div>").addClass("wl-figure-wrap");(function(e,n){return e.getTokenAt(n.to,!0).state.marks.filter((function(e){return e.from.line>=n.from.line&&e.to.line<=n.to.line&&!(e.from.line===n.from.line&&e.from.ch===n.from.ch&&e.kind===n.kind)}))})(e,n).forEach((function(n){var i=n.rangeForRegion("inner");if("caption"===n.kind)r.append(function(e,n){var t=n.from,r=n.to,i=p(e.getRange(t,r));return $("<div>").text(i).addClass("wl-figure-caption")}(e,i));else if("includegraphics"===n.kind){var a=e.getRange(i.from,i.to).replace(/"/g,""),o=t.getEntityForPath(a);o?t.isPreviewableEntity(o)?r.append(function(e,n){return $("<img>").attr("src",n).addClass("img-responsive wl-figure").one("load",(function(){e.refresh()}))}(e,t.getPreviewUrlForEntity(o))).append(B(a)):r.append(B(a)):r.append(function(e){return $("<span>").text("[Not Found: ".concat(e,"]")).css({"font-size":"small",color:"red"}).addClass("wl-figure-not-found")}(a))}}));var i=x(e,n,"outer",!1,{clearOnEnter:!0,inclusiveLeft:!0,inclusiveRight:!0,replacedWith:r[0]});k(e,r[0],i)}}},W=["label","ref","cite","citep","citet","footcite","nocite","autocite","autocites","citeauthor","citeyear","parencite","citealt","textcite","cref","Cref"];function I(e){var n=e.kind.match(/cite/)?"fa-book":"fa-tag",t=$("<span>").addClass("fa fa-fw ".concat(n)),r=$("<span>").text("{").addClass("wl-label-bracket");return $("<span>").addClass("wl-label-open").prepend(t).append(r)[0]}var H={matcher:function(e,n){return W.includes(n.kind)},marker:function(e,n){var t;v([x(e,n,"pre",!0,{replacedWith:I(n)}),x(e,n,"post",!0,{replacedWith:(t=$("<span>").text("}").addClass("wl-label-bracket"),t[0])})])}};function N(e){var n=$("<i>").addClass("fa fa-fw fa-link").css({"border-bottom":e?"1px dashed #1C8B22":"1px dashed #bb1111"}),t=$("<span>").text("{").addClass("wl-label-bracket");return $("<span>").append(n).append(t)[0]}var q={matcher:function(e,n){return"input"===n.kind||"include"===n.kind},marker:function(e,n,t){var r,i=e.getRange(n.contentFrom,n.contentTo);i.match(/\.tex$/)||(i+=".tex"),v([x(e,n,"pre",!1,{replacedWith:N(t.fileExistsForPath(i))}),x(e,n,"inner",!0,{className:"wl-input"}),x(e,n,"post",!1,{replacedWith:(r=$("<span>").text("}").addClass("wl-label-bracket"),r[0])})])}},Z={line:0,ch:0};function X(){this.wlMatched=!1}function J(){return this.wlMatched}function V(e,n){for(var t=-1,r=-1,i=-1,a=0;a<n.length;++a){var o=n[a];if(o)if("title"===o.kind&&o.getContent(e)===this.wlTitle)t=a;else if("author"===o.kind&&o.getContent(e)===this.wlAuthor)r=a;else if("maketitle"===o.kind){var c=this.find();d(Z,c.from)&&d(o.to,c.to)&&(i=a)}}t>=0&&i>=0&&(!this.wlAuthor||r>=0)&&(delete n[t],delete n[i],r>=0&&delete n[r],this.wlMatched=!0)}var D={marker:function(e,n,t,r){var i=function(e,n){var t=$("<h1>").addClass("title").text(p(n.getContent(e)));return $("<div>").addClass("preamble").append(t)}(e,n);t&&i.append(function(e,n){var t=(r=n.getContent(e),(r=r.replace(/\\and|\n/g,"\\\\")).split("\\\\").map((function(e){return e.trim()}))).map((function(e){return $("<li>").text(p(e))}));var r;return $("<ul>").addClass("authors").append(t)}(e,t));var a=e.addLineWidget(0,i[0],{above:!0}),o=function(e,n,t,r){var i=e.markText(Z,r.to,{clearOnEnter:!0,collapsed:!0,inclusiveRight:!0});return i.wlTitle=n.getContent(e),i.wlAuthor=t?t.getContent(e):null,i.wlClearMatch=X,i.wlMatch=V,i.wlIsMatched=J,i}(e,n,t,r);function c(){a.clear()}o.on("clear",c),o.on("hide",c),k(e,i,o)}};function U(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return G(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return G(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(c)throw a}}}}function G(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function K(e,n){var t=!1,r=!1;function i(r){t||(t=!0,function(t){var r=(a=e,a.getStateAfter(h(a),!0).marks||[]),i=e.getAllMarks().filter((function(e){return"function"==typeof e.wlClearMatch}));var a;i.forEach((function(e){return e.wlClearMatch()})),i.forEach((function(n){return n.wlMatch(e,r)})),i.forEach((function(n){if(!n.wlIsMatched()){var t=n.find();t&&t.to.line<h(e)&&n.clear()}}));var o,c,l,u,s=[],f=U(r);try{for(f.s();!(u=f.n()).done;){var d=u.value;d&&(L.matcher(e,d)?s.push(L.marker(e,d)):P.matcher(e,d)?P.marker(e,d):A.matcher(e,d)?A.marker(e,d):O.matcher(e,d)?O.marker(e,d):S.matcher(e,d)?S.marker(e,d):F.matcher(e,d)?F.marker(e,d):j.matcher(e,d)?j.marker(e,d,n):H.matcher(e,d)?H.marker(e,d):q.matcher(e,d)?q.marker(e,d,n):"title"===d.kind?o=d:"author"===d.kind?c=d:"maketitle"===d.kind&&(l=d))}}catch(e){f.e(e)}finally{f.f()}if(o&&l){var m=e.indexFromPos(e.getCursor("head")),g=e.indexFromPos(l.to);(t||m>g)&&(t&&m<=g&&e.setCursor(e.posFromIndex(g+1)),D.marker(e,o,c,l))}if(s.length>0){var p=s.map((function(e){return e.replacedWith}));MathJax.Hub.Queue(["resetEquationNumbers",MathJax.InputJax.TeX],["Process",MathJax.Hub,p,function(){s.forEach((function(e){return e.changed()}))}])}}(r),t=!1)}function a(){i(!1)}function c(){i(!1)}this.enable=function(){r||(e.on("cursorActivity",a),e.on("viewportChange",c),i(!0),r=!0,e.refresh(),e.scrollIntoView(null,100),g((function(){e.focus()})))},this.disable=function(){if(r){e.off("cursorActivity",a),e.off("viewportChange",c);for(var n=e.getAllMarks(),t=0;t<n.length;++t)n[t].clear();o.a.forEach(o.a.range(0,e.doc.lineCount()),(function(n){e.doc.removeLineClass(n,"text")})),r=!1,e.refresh(),g((function(){e.focus()}))}},this.update=function(){r&&i(!1)},this.cmRefresh=function(){e.refresh()},this.isEnabled=function(){return r}}t(33);var _=navigator.userAgent,Q=navigator.platform,Y=/AppleWebKit/.test(_)&&/Mobile\/\w+/.test(_)||/Mac/.test(Q);t(65),t(41);function ee(e){try{e.focus()}catch(e){}}function ne(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==t)return;var r,i,a=[],o=!0,c=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(e){c=!0,i=e}finally{try{o||null==t.return||t.return()}finally{if(c)throw i}}return a}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return te(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return te(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var re=["chapter","section","subsection","subsubsection","itemize","enumerate"],ie={chapter:re,"chapter\\*":re,section:re,"section\\*":re,subsection:re,"subsection\\*":re,subsubsection:re,"subsubsection\\*":re},ae=["textbf","textit"],oe=ae.concat(o.a.keys(ie));function ce(e){var n=e.getCursor(),t=e.getTokenAt(n,!0).state,r=o.a.last(t.openMarks),i=r&&!o.a.includes(oe,r.kind);r&&!i||e.setSelection({line:n.line,ch:0},{line:n.line})}function le(e,n,t){var r=t.to(),i=e.getTokenAt(r,!0).state;o.a.filter(i.marks,(function(e){var r=o.a.includes(oe,e.kind),i=n.match(e.kind),a=function(e,n){var t=n.from(),r=n.to();return e.from.line>=t.line&&e.from.ch>=t.ch&&e.to.line<=r.line&&e.to.ch<=r.ch}(e,t);return r&&i&&a})).reverse().forEach((function(n){return s(e,n)}))}function ue(e,n,t){var r=t.to(),i=e.getTokenAt(r,!0).state,a=o.a.clone(i.openMarks)||[];return function(e,n){return Boolean(o.a.find(e,(function(e){var t=ie[e.kind];return!!t&&Boolean(o.a.find(t,(function(e){return n.match(e)})))})))}(a,n)||function(e,n){return e.pop(),Boolean(o.a.find(e,(function(e){return!!o.a.includes(ae,e.kind)&&n.match(e.kind)})))}(a,n)}function se(e,n,t,r){var i=o.a.clone(r.from()),a=o.a.clone(r.to()),c=e.getRange(i,a),l=e.getTokenAt(a,!0).state,u=o.a.last(l.openMarks);if(!u||!o.a.includes(ae,u.kind))return!1;if(!(u=function(e,n){var t=e.getTokenAt({line:e.lastLine()+1,ch:0},!0).state;return o.a.find(t.marks,(function(e){return e.kind===n.kind&&o.a.isEqual(e.contentFrom,n.contentFrom)&&o.a.isEqual(e.from,n.from)}))}(e,u))||!n.match(u.kind))return!1;var f=e.getRange(u.contentFrom,i),h=ne(e.getRange(a,u.contentTo).match(/^\s*/),1)[0],d=ne(f.match(/\s*$/),1)[0],m=function(e,n){var t=e.from();return n.contentFrom.line===t.line&&n.contentFrom.ch===t.ch}(r,u),g=function(e,n){var t=e.to();return n.contentTo.line===t.line&&n.contentTo.ch===t.ch}(r,u);return m&&g?s(e,u):m?(h&&(a.ch+=h.length,c+=" "),e.operation((function(){e.replaceRange("",i,a),e.replaceRange(c,u.from)}))):g?(d&&(i.ch-=d.length,c=" ".concat(c)),e.operation((function(){e.replaceRange(c,u.to),e.replaceRange("",i,a)}))):(h&&(a.ch+=h.length),d&&(i.ch-=d.length),e.operation((function(){e.replaceRange(n,a),e.replaceRange(t,i)}))),!0}function fe(e,n){return 0===n.from().ch?e:"\n"+e}function he(e,n,t){var r=t.to(),i=r.line;return r.ch===e.getLine(i).length?n:n+"\n"}function de(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r&&!e.somethingSelected()&&ce(e),e.operation((function(){for(var i,a=e.listSelections(),o=0;o<a.length;o++)le(e,n,a[o]),ue(e,n,a[o])||se(e,n,t,a[o])?a=e.listSelections():(r&&(n=fe(n,a[o]),t=he(e,t,a[o])),e.replaceRange(n,a[o].from(),null,"+wrap"),a=e.listSelections(),e.replaceRange(t,a[o].to(),null,"+wrap"),i=a[o],(a=e.listSelections())[o]=i,e.setSelections(a))})),e.refresh(),ee(e)}function me(e,n){var t=e.getCursor(),r=e.getTokenAt(t,!0),i=e.getLine(t.line);0===t.ch||!i&&!r.type?de(e,"\\begin{".concat(n,"}\n"),"\n\\end{".concat(n,"}\n"),!1):t.ch>0&&t.ch<i.length?de(e,"\n\\begin{".concat(n,"}\n"),"\n\\end{".concat(n,"}\n"),!1):de(e,"\n\\begin{".concat(n,"}\n"),"\n\\end{".concat(n,"}"),!1),function(e){var n=e.getSelection().split("\n"),t=o.a.map(n,(function(e){return"\\item ".concat(e)}));e.replaceSelection(t.join("\n"),null,"+wrap")}(e)}function ge(e){de(e,"\\textbf{","}")}function pe(e){de(e,"\\textit{","}")}var ke=["\\cite","\\citep","\\citet","\\footcite","\\nocite","\\autocite","\\autocites","\\citeauthor","\\citeyear","\\parencite","\\citealt","\\textcite"];function ve(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var be=Y?"Cmd":"Ctrl";function we(e,n){var t;return i.a.commands.save=function(){},Object.assign({},(ve(t={Backspace:Ce,Delete:xe,Up:Re,Enter:Le,Home:"goLineLeftSmart",End:"goLineRight","Cmd-Left":"goLineLeftSmart"},"".concat(be,"-B"),ge),ve(t,"".concat(be,"-I"),pe),ve(t,"".concat(be,"-/"),"toggleComment"),ve(t,"".concat(be,"-F"),"findPersistent"),ve(t,"".concat(be,"-G"),"findPersistentNext"),ve(t,"Shift-".concat(be,"-G"),"findPersistentPrev"),ve(t,"Ctrl-Space","autocomplete"),ve(t,"Ctrl-,",n.triggerSyncToPdf),ve(t,"Ctrl-.",n.triggerRecompile),ve(t,"".concat(be,"-Enter"),n.triggerRecompile),t),function(e){var n={"'{'":{openChar:"{",closeChar:"}",typedChar:"{"},"'['":{openChar:"[",closeChar:"]",typedChar:"["},"'}'":{openChar:"{",closeChar:"}",typedChar:"}"},"']'":{openChar:"[",closeChar:"]",typedChar:"]"},"'`'":{openChar:"`",closeChar:"'",typedChar:"`"},"'''":{openChar:"`",closeChar:"'",typedChar:"'"}};return Object.keys(n).reduce((function(t,r){var a=n[r],c=a.openChar,l=a.closeChar,u=a.typedChar;return t[r]=function(n){return function(e,n,t,r,a){if(!n("autoCloseBrackets"))return i.a.Pass;if(e.somethingSelected())return i.a.Pass;o.a.forEach(e.listSelections(),(function(n,o){!function(n,o){var c=i.a.Pos(n.line,n.ch+1),l=e.getRange(n,c);a===t?t===r&&l===r||(""===l||l.match(/^[`'[\]{} ]+$/)?e.replaceRange(t+r,n):e.replaceRange(t,n)):l!==r&&e.replaceRange(r,n),0===o?e.setCursor(c):e.addSelection(c)}(n.from(),o)}))}(n,e,c,l,u)},t}),{})}(e))}var ye={chapter:!0,"chapter\\*":!0,section:!0,"section\\*":!0,subsection:!0,"subsection\\*":!0,subsubsection:!0,"subsubsection\\*":!0};function Ce(e){var n=e.listSelections()[0];return o.a.isEqual(n.from(),n.to())&&(function(e){function n(n){return""===e.getRange(n.contentFrom,n.contentTo).replace(/\s*/g,"").replace(/\\item$/,"")}var t=e.doc.getCursor(),r=e.getTokenAt(t,!0),i=o.a.last(r.state.openMarks),a=o.a.last(r.state.marks),c=e.getLine(t.line);if(!i||"itemize"!==i.kind&&"enumerate"!==i.kind){if(a&&("itemize"===a.kind||"enumerate"===a.kind)&&t.line===a.to.line+1&&0===t.ch)return e.operation((function(){""===c&&e.execCommand("deleteLine"),e.setCursor(a.contentTo)})),!0}else{if(t.line===i.contentFrom.line+1&&6===t.ch){var l=o.a.find(e.getStateAfter(e.doc.lineCount(),!0).marks,(function(e){return("itemize"===e.kind||"enumerate"===e.kind)&&e.from.line===i.from.line&&e.from.ch===i.from.ch}));return n(l)?e.replaceRange("",l.from,l.to):e.operation((function(){var r=e.getLine(t.line-2),i=e.getRange(t,{line:t.line,ch:c.length});if(r&&r.match(/\\end{.*}/))e.replaceRange(i+"\n",{line:t.line-1,ch:0}),e.replaceRange("",{line:t.line+1,ch:0},{line:t.line+1,ch:c.length}),e.replaceRange("",{line:t.line+1,ch:0},{line:t.line+2,ch:0}),n(l)&&e.replaceRange("",l.from,l.to),o.a.delay((function(){e.setCursor({line:t.line-1,ch:0})}),20);else if(r){var a=r.length;e.replaceRange(i,{line:t.line-2,ch:a}),e.replaceRange("",{line:t.line,ch:0},{line:t.line,ch:c.length}),n(l)&&e.replaceRange("",l.from,l.to),e.execCommand("deleteLine"),e.setCursor({line:t.line-2,ch:a})}else e.replaceRange(i+"\n",{line:t.line-1,ch:0}),n(l)&&e.replaceRange("",l.from,l.to),e.replaceRange("",{line:t.line+1,ch:0},{line:t.line+2,ch:0}),o.a.delay((function(){e.setCursor({line:t.line-1,ch:0})}),20),e.refresh()})),!0}var u=o.a.find(r.state.marks,(function(e){return("itemize"===e.kind||"enumerate"===e.kind)&&e.to.line===t.line-1}));if(u&&t.line===u.to.line+1){if(n(u))return e.replaceRange("",u.from,u.to),!0;if(6===t.ch)return e.operation((function(){var r=e.getLine(t.line-2).length,i=e.getRange(t,{line:t.line,ch:c.length});e.replaceRange(i,{line:t.line-2,ch:r}),e.replaceRange("",{line:t.line,ch:0},{line:t.line,ch:c.length}),n(u)&&e.replaceRange("",u.from,u.to),e.replaceRange("",{line:t.line,ch:0},{line:t.line+1,ch:0}),e.setCursor({line:t.line-2,ch:r})})),!0}}}(e)||function(e){var n=e.doc.getCursor(),t=e.getTokenAt(n,!0),r=o.a.last(t.state.openMarks),i=o.a.last(t.state.marks),a=e.getLine(n.line);if(r&&"abstract"===r.kind){if(0===n.ch&&n.line===r.contentFrom.line+1||o.a.isEqual(n,r.contentFrom)){var c=o.a.find(e.getStateAfter(e.doc.lineCount(),!0).marks,(function(e){return"abstract"===e.kind&&e.from.line===r.from.line&&e.from.ch===r.from.ch}));return""===e.getRange(c.contentFrom,c.contentTo).replace(/\s*/,"")?(e.replaceRange("",c.from,c.to),!0):(e.setCursor({line:n.line-2,ch:e.getLine(n.line-2).length}),!0)}}else if(i&&"abstract"===i.kind&&n.line===i.to.line+1&&0===n.ch)return e.operation((function(){""===a&&e.execCommand("deleteLine"),e.setCursor(i.contentTo)})),!0}(e)||function(e){var n=e.doc.getCursor(),t=e.getTokenAt(n,!0),r=o.a.last(t.state.openMarks),i=o.a.last(t.state.marks),a=e.getLine(n.line);if(r&&ye[r.kind]){var c=a.match(new RegExp("\\\\"+r.kind+"\\s*{}"));if(c)return e.replaceRange("",{line:n.line,ch:r.from.ch},{line:n.line,ch:r.from.ch+c[0].length}),!0;if(r.contentFrom.line===n.line&&r.contentFrom.ch===n.ch)return 0===r.from.ch?e.getLine(n.line-1)?(e.setCursor({line:r.from.line-1}),e.execCommand("goLineEnd")):(e.setCursor({line:r.from.line-1}),e.execCommand("goLineEnd"),e.replaceRange("",e.getCursor(),r.from)):e.replaceRange("",{line:n.line,ch:r.from.ch-1},{line:n.line,ch:r.from.ch}),!0}else if(i&&ye[i.kind]&&(i.to.line===n.line&&i.to.ch===n.ch||n.line===i.to.line+1&&0===n.ch))return""===a&&e.execCommand("deleteLine"),e.setCursor(i.contentTo),!0}(e))?null:(function(e){if(e.somethingSelected())return i.a.Pass;e.listSelections().reverse().forEach((function(n){!function(n){var t=i.a.Pos(n.line,n.ch-1),r=i.a.Pos(n.line,n.ch+1),a=e.getRange(t,n),o=e.getRange(n,r),c=["{","[","(","`"],l=c.indexOf(a)>=0,u=c.indexOf(a)===["}","]",")","'"].indexOf(o);l&&u&&e.replaceRange("",n,r)}(n.from())})),i.a.Pass}(e),i.a.Pass)}function xe(e){return function(e){var n=e.doc.getCursor(),t=e.getTokenAt(n,!0),r=o.a.last(t.state.openMarks),i=e.getLine(n.line),a=e.getLine(n.line+1);if(!a)return!1;if(!r||"enumerate"!==r.kind&&"itemize"!==r.kind){if(a.match(/\\begin{(enumerate|itemize)}/)&&n.ch===i.length)return!0}else if(n.ch===i.length&&(a.match(/\\begin{.*}/)||a.match(/\\end{.*}/)))return!0}(e)||function(e){var n=e.doc.getCursor(),t=e.getTokenAt(n,!0),r=o.a.last(t.state.openMarks),i=e.getLine(n.line),a=Me(e,{line:n.line+1,ch:0},"EOL"),c=Me(e,{line:n.line,ch:0},"EOL"),l=o.a.find(o.a.union(a,c),(function(e){return ye[e.kind]}));if(r&&ye[r.kind]){var u=i.match(new RegExp("\\\\"+r.kind+"\\s*{}"));if(u)return e.replaceRange("",{line:n.line,ch:r.from.ch},{line:n.line,ch:r.from.ch+u[2].length}),!0;if(l&&n.ch===l.contentTo.ch)return!0}else if(n.ch===i.length&&a&&l)return""===i&&e.replaceRange("",n,{line:n.line+1,ch:0}),!0}(e)||function(e){var n=e.doc.getCursor(),t=e.getTokenAt(n,!0),r=o.a.last(t.state.openMarks),i=e.getLine(n.line),a=function(){var t=e.getLine(n.line+1);if(t){var r=e.getTokenAt({line:n.line+1,ch:t.length},!0);return o.a.find(r.state.openMarks,(function(e){return"abstract"===e.kind&&e.from.line===n.line+1}))}}();if(r&&"abstract"===r.kind){if(0===n.ch&&n.line===r.contentFrom.line+1||o.a.isEqual(n,r.contentFrom)){var c=o.a.find(e.getStateAfter(e.doc.lineCount(),!0).marks,(function(e){return"abstract"===e.kind&&e.from.line===r.from.line&&e.from.ch===r.from.ch}));if(""===e.getRange(c.contentFrom,c.contentTo).replace(/\s*/,""))return e.replaceRange("",c.from,c.to),!0}}else if(a&&n.ch===i.length)return e.operation((function(){""===i&&e.execCommand("deleteLine"),e.setCursor(a.contentFrom)})),!0}(e)?null:i.a.Pass}function Re(e){var n=e.getCursor(),t=e.getTokenAt(n,!0).state,r=o.a.last(t.marks);return!r||"item"!==r.kind&&"enumerate-item"!==r.kind||n.ch!==r.to.ch?i.a.Pass:(e.execCommand("goLineLeft"),null)}function Le(e){var n=e.getCursor(),t=e.getTokenAt(n,!0).state,r=o.a.last(t.openMarks),a=o.a.last(t.marks);if(r){var c=e.getStateAfter(n.line,!0),l=o.a.last(c.marks),u=o.a.last(c.openMarks);if(("itemize"===r.kind||"enumerate"===r.kind)&&a&&n.line>=a.to.line){if(n.line===r.from.line&&n.ch<r.contentFrom.ch)return i.a.Pass;if(0===n.ch&&0===e.getLine(n.line).indexOf("\\item"))return i.a.Pass;if(l&&l.kind===r.kind&&n.line===l.to.line&&o.a.isEqual(r.from,l.from)&&n.ch<l.to.ch)return i.a.Pass;if(n.line===r.from.line||n.line===u.from.line){if(n.ch<r.contentFrom.ch)return i.a.Pass;var s=e.getStateAfter(n.line+1,!0);if(!o.a.find(s.marks,(function(e){return e.from.line>=n.line&&("enumerate-item"===e.kind||"item"===e.kind||e.kind===r.kind)})))return i.a.Pass;e.replaceRange("\n\\item ",{line:n.line,ch:n.ch}),e.doc.setCursor({line:n.line+1,ch:r.contentFrom.ch})}else{var f=o.a.find(t.openMarks,(function(e){return e!==r&&("enumerate"===e.kind||"itemize"===e.kind)})),h=function(e,n){var t={line:e.doc.lineCount(),ch:0},r=e.getTokenAt(t,!0).state;return o.a.find(r.marks,(function(e){return e.kind===n.kind&&o.a.isEqual(e.contentFrom,n.contentFrom)&&o.a.isEqual(e.from,n.from)}))}(e,r),d=e.getLine(n.line),m=e.getRange({line:n.line,ch:0},{line:n.line,ch:d.length}).replace(/\s*/g,"").replace("\\item","");h&&!function(e,n,t){var r=e.getTokenAt(t,!0).state;return o.a.find(r.marks,(function(e){return("item"===e.kind||"enumerate-item"===e.kind)&&e.from.line>n.from.line&&e.to.line<=t.line}))}(e,a,h.to)&&""===m?f?e.operation((function(){o.a.delay((function(){e.setCursor({line:h.to.line,ch:0})}),20),e.execCommand("deleteLine"),e.replaceRange("\\item \n",{line:h.to.line,ch:0}),e.refresh()})):e.operation((function(){o.a.delay((function(){e.setCursor({line:h.to.line,ch:0})}),20),e.execCommand("deleteLine"),e.replaceRange("\n",{line:h.to.line,ch:0}),e.refresh()})):(e.replaceRange("\n\\item ",{line:n.line,ch:n.ch}),"item"!==l.kind&&"enumerate-item"!==l.kind||e.doc.setCursor({line:n.line+1,ch:l.contentFrom.ch}))}return null}if(ye[r.kind])return r.contentFrom.line===n.line&&r.contentFrom.ch===n.ch?(e.replaceRange("\n",r.from),null):(e.operation((function(){o.a.delay((function(){e.setCursor({line:n.line+1,ch:0})}),20),e.replaceRange("\n",{line:n.line+1,ch:0}),e.refresh()})),null)}return i.a.Pass}function Me(e,n,t){if(n.line>e.lastLine())return[];if("EOL"===t){var r=e.getLine(n.line);t={line:n.line,ch:r.length}}return o.a.filter(e.getTokenAt(t).state.marks,(function(e){return e.from.line>=n.line&&e.from.ch>=n.ch&&e.to.line<=t.line&&e.to.ch<=t.ch}))}function Pe(e,n){if(220===n.which)e.showHint();else if(8===n.which||188===n.which||32===n.which||/^[a-zA-Z0-9]+$/.test(String.fromCharCode(n.which))){var t=e.getCursor(),r=e.getTokenAt(t),i=e.getTokenAt({line:t.line,ch:r.start-1});if(r.string.match(/^\\/)||"keyword"===r.type&&"\\begin"===i.string)e.showHint();else{var a=o.a.last(r.state.openMarks);if(!a)return;-1!==ke.indexOf("\\".concat(a.kind))&&e.showHint()}}}t(61);var Te=t(473),Ae=t.n(Te);function Ee(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==t)return;var r,i,a=[],o=!0,c=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(e){c=!0,i=e}finally{try{o||null==t.return||t.return()}finally{if(c)throw i}}return a}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return Oe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Oe(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Se(e,n){function t(e,n,t){var r=t.text.replace(/\$[0-9]/g,"");if(c(r)){var i=e.getCursor().line,a=Ee(e.getLine(i).match(/^\s*/),1)[0];r="".concat(r,"\n").concat(a,"\n").concat(a,"\\end{}")}e.replaceRange(r,n.from,n.to,"complete");var o=r.match(/[{[]([\w \-_]*)[}\]]/);if(null!==o){var l=n.from.line,u={line:l,ch:n.from.ch+o.index+1},s={line:l,ch:u.ch+o[1].length};e.setSelection(u,s),e.showHint()}}function i(e,n,t){e.replaceRange(t.text,n.from,n.to,"complete");var r=n.from.line,i=e.getTokenAt(n.from);if(c(a(e,r,i).string)){var o=e.getLine(r+1)||"",l=(e.getLine(r+2)||"").indexOf("\\end{}");if(-1!==l){if(("itemize"===t.text||"enumerate"===t.text)&&(/^\s+$/.test(o)||!o)){var u=o.match(/^\s*/);e.replaceRange("".concat(u,"\\item "),{line:r+1,ch:0})}e.replaceRange(t.text,{line:r+2,ch:l+5})}e.setCursor({line:r+1})}else e.setCursor({line:r})}function a(e,n,t){for(var i=t;"tag"!==i.type&&i.start>0;)i=e.getTokenAt(Object(r.Pos)(n,i.start));return"tag"===i.type&&i!==t?i:null}function c(e){return/^\\begin/.test(e)}var l=o.a.memoize((function(e){return new Ae.a(e,{threshold:.3,keys:["text"]})})),u={"\\begin":e.getBeginCommandArguments()};return function(o){if(n("autoComplete")){var c=o.getCursor(),s=o.getTokenAt(c);if(!/\b(?:string|comment)\b/.test(s.type)){var f=c.ch-s.start,h=s.string.lastIndexOf(",",f-1)+1,d=s.string.indexOf(",",f)+1;d&&(s.end=s.start+d-1),s.start+=h,s.string=s.string.slice(h,d?d-1:void 0).trim();var m=o.getRange(Object(r.Pos)(c.line,c.ch-1),Object(r.Pos)(c.line,c.ch+1));" "===m||"  "===m?(s.type="tag",s.string=""):"\\"===s.string&&(s.type="tag");var g,p,k=a(o,c.line,s);if(k)g=function(e){return-1!==ke.indexOf(e)}((p=k).string)?e.getBibtexArguments().keys.map((function(e){return{text:e,displayText:e}})):function(e){return/^\\(eq|page|c|C)?ref/.test(e)}(p.string)?e.getReferenceArguments().map((function(e){return{text:e,displayText:e}})):function(e){return(u[e.string]||[]).map((function(e){return{text:e,displayText:e,hint:i}}))}(p),"{"!==s.string&&"["!==s.string||(s.start=s.end,s.string="");else{if(""===s.string)return;g=e.getCommandCompletions(t)}if("\\"===s.string||""===s.string)return{list:g,from:Object(r.Pos)(c.line,s.start),to:Object(r.Pos)(c.line,s.end)};try{return{list:l(g).search(s.string),from:Object(r.Pos)(c.line,s.start),to:Object(r.Pos)(c.line,s.end)}}catch(e){if("Error: Pattern length is too long"!==e)throw e}}}}}function ze(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Fe=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.editor=n,this.reset()}var n,t,r;return n=e,(t=[{key:"reset",value:function(){this.highlights&&this.highlights.forEach((function(e){return e.marker.clear()})),this.highlights=[]}},{key:"clearRow",value:function(e){var n=this;this.highlights.filter((function(n){var t=n.marker.find();return!!t&&t.from.line===e})).forEach((function(e){return n.removeHighlight(e)}))}},{key:"addHighlight",value:function(e){var n=e.row,t=e.column,r=e.word,i=e.suggestions,a={line:n,ch:t},o={line:n,ch:t+r.length},c=this.editor.markText(a,o,{className:"spelling-error"});this.highlights.push({word:r,suggestions:i,marker:c})}},{key:"removeHighlight",value:function(e){e.marker.clear(),this.highlights=this.highlights.filter((function(n){return n!==e}))}},{key:"removeWord",value:function(e){var n=this;this.highlights.filter((function(n){return n.word===e})).forEach((function(e){return n.removeHighlight(e)}))}},{key:"findHighlightAtPosition",value:function(e){return o.a.find(this.highlights,(function(n){var t=n.marker.find();return t&&t.from.line===e.line&&t.to.line===e.line&&t.from.ch<=e.ch&&t.to.ch>=e.ch}))}},{key:"clearHighlightTouchingRange",value:function(e){var n=this,t=o.a.find(this.highlights,(function(t){return n.isHighlightTouchingSelection(t,e.from,e.to)}));t&&this.removeHighlight(t)}},{key:"isHighlightTouchingSelection",value:function(e,n,t){var r=e.marker.find();if(r){var i=r.from,a=r.to,o=i.line===n.line,c=i.ch<=n.ch&&a.ch>=n.ch,l=i.ch<=t.ch&&a.ch>=t.ch;return o&&(c||l)}}}])&&ze(n.prototype,t),r&&ze(n,r),e}();function $e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Be=function(){function e(n,t,r,a,o){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),i.a.defineMode("latex",(function(){return new f})),i.a.defineMIME("application/x-tex","latex"),i.a.defineMIME("application/x-latex","latex"),this.codeMirror=i()(n,{mode:"latex",lineNumbers:!0,lineWrapping:!0,extraKeys:we(o,a),hintOptions:{hint:Se(r,o),closeCharacters:/[\s()[\]{};>,]/,completeSingle:!1},readOnly:o("readOnly")}),this.adapter=t,this.autocompleteAdapter=r,o("readOnly")||(this.highlightedWordManager=new Fe(this.codeMirror)),this.codeMirror.on("keyup",Pe)}var n,t,a;return n=e,(t=[{key:"getCodeMirror",value:function(){return this.codeMirror}},{key:"openDoc",value:function(e){var n=Object(r.Doc)(e,"latex");return this.codeMirror.swapDoc(n),n}},{key:"enable",value:function(){this.richText=new K(this.codeMirror,this.adapter),this.richText.enable()}},{key:"disable",value:function(){this.richText.disable(),this.codeMirror.off("keyup",Pe)}},{key:"update",value:function(){this.richText.update()}},{key:"setReadOnly",value:function(e){this.codeMirror.setOption("readOnly",e),e||this.highlightedWordManager||(this.highlightedWordManager=new Fe(this.codeMirror))}},{key:"wrapBold",value:function(){ge(this.codeMirror)}},{key:"wrapItalic",value:function(){pe(this.codeMirror)}},{key:"wrapSection",value:function(){de(this.codeMirror,"\\section{","}",!0)}},{key:"wrapSubsection",value:function(){de(this.codeMirror,"\\subsection{","}",!0)}},{key:"wrapInlineMath",value:function(){de(this.codeMirror,"\\(","\\)",!1)}},{key:"wrapDisplayMath",value:function(){de(this.codeMirror,"\\[","\\]",!0)}},{key:"wrapNumberedList",value:function(){me(this.codeMirror,"enumerate")}},{key:"wrapBulletList",value:function(){me(this.codeMirror,"itemize")}}])&&$e(n.prototype,t),a&&$e(n,a),e}()}}]);